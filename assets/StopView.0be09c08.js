import{F as A,A as S}from"./FavoriteButton.969c48f0.js";import{d as q,g as D,r as _,B as L,C as $,w as E,c as i,b as t,l as m,m as a,u as o,a as U,D as k,F as f,i as w,E as j,o as n,j as C,k as N,p as z,q as M,v as V,_ as W}from"./index.581cf3fe.js";import{u as G}from"./transport-stops.d9089dbe.js";import{u as H}from"./transport-routes.3dde5bf7.js";const p=d=>(z("data-v-19e64545"),d=d(),M(),d),J={key:0,style:{opacity:"0.7"}},K=p(()=>t("br",null,null,-1)),P={style:{"text-align":"left",width:"100%"}},Q=p(()=>t("thead",null,[t("tr",null,[t("th",null,"Number"),t("th",null,"Destination"),t("th",{style:{"text-align":"right"}},"Time")])],-1)),X={style:{"text-align":"right"}},Y=p(()=>t("br",null,null,-1)),Z=p(()=>t("h3",null,"Routes on this stop:",-1)),O={class:"routes-block"},tt=p(()=>t("div",{style:{"font-size":"10px","font-style":"italic",display:"flex","flex-direction":"row","flex-wrap":"nowrap"}},[t("span",{style:{color:"#ff7758"}}," Note: "),t("div",{style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",margin:"0 10px"}},[t("span",null," There are more routes possible. "),t("span",null,"We have no more actual available data. ")])],-1)),et=q({__name:"StopView",setup(d){const s=j().params.stopCode.toString(),{addOrRemoveStopInFavorites:I,isStopInFavorites:T,getStopByCode:B}=G(),{getRouteByNumber:R}=H(),c=D(()=>B(s)),y=_([]),F=_([]),v=_([]),b=_(),x=()=>S.getArrivalTime(s).then(l=>{y.value=l});return L(()=>{x().then(()=>{b.value=setInterval(x,15e3)})}),$(()=>{clearInterval(b.value)}),E(c,(l,r)=>{l===void 0||l.id===(r==null?void 0:r.id)||S.getRoutesNumbersAtStop(l.id).then(u=>{F.value=u,v.value=u.map(e=>R(e)).filter(e=>e!==void 0)})},{immediate:!0}),(l,r)=>{const u=V("RouterLink");return n(),i(f,null,[t("h2",null,[m(" Stop "+a(o(s))+" ",1),o(c)!==void 0?(n(),U(A,{key:0,"is-full":o(T)(o(s)),style:{margin:"5px"},onClick:r[0]||(r[0]=e=>o(I)(o(s)))},null,8,["is-full"])):k("",!0)]),o(c)!==void 0?(n(),i("h4",J,a(o(c).name),1)):k("",!0),K,t("table",P,[Q,t("tbody",null,[(n(!0),i(f,null,w(y.value,(e,h)=>(n(),i("tr",{key:e.routeNumber+h},[t("td",null,[C(u,{to:{path:`/route/${e.routeNumber}`,query:{stopCode:o(s)}}},{default:N(()=>[m(a(e.routeNumber),1)]),_:2},1032,["to"])]),t("td",null,a(e.destinationStopName),1),t("td",X,a(e.arrivalTime),1)]))),128))])]),Y,Z,t("div",O,[(n(!0),i(f,null,w(v.value,(e,h)=>{var g;return n(),i("span",{key:e.id,class:"routes-block__route-item"},[C(u,{to:{path:`/route/${e.routeNumber}`,query:{stopCode:o(s)}}},{default:N(()=>[m(a(e.routeNumber),1)]),_:2},1032,["to"]),m(" "+a(h+1===((g=v.value)==null?void 0:g.length)?".":","),1)])}),128))]),tt],64)}}});const rt=W(et,[["__scopeId","data-v-19e64545"]]);export{rt as default};
