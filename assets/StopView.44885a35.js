import{A as S,F as T}from"./FavoriteButton.45ae1062.js";import{d as w,f as F,r as f,q as A,c as i,b as t,j as c,t as a,u as n,a as L,h as $,F as h,g as k,y as D,o as l,i as N,w as g,p as j,k as q,l as z,_ as E}from"./index.8e262825.js";import{u as V}from"./transport-stops.dee0e955.js";import{u as W}from"./transport-routes.9253e600.js";const d=p=>(j("data-v-b9d1ff09"),p=p(),q(),p),G=d(()=>t("br",null,null,-1)),H={style:{"text-align":"left",width:"100%"}},J=d(()=>t("thead",null,[t("tr",null,[t("th",null,"Number"),t("th",null,"Destination"),t("th",null,"Time")])],-1)),K=d(()=>t("br",null,null,-1)),M=d(()=>t("h3",null,"Routes on this stop:",-1)),P={class:"routes-block"},Q=d(()=>t("span",{style:{"font-size":"10px","font-style":"italic"}}," Note: there are more routes possible. We have no more actual available data. ",-1)),U=w({__name:"StopView",setup(p){const r=D().params.stopCode.toString(),{addOrRemoveStopInFavorites:x,isStopInFavorites:C,getStopByCode:R}=V(),{getRouteByNumber:B}=W(),v=F(()=>R(r)),b=f([]),I=f([]),_=f([]);return S.getArrivalTime(r).then(o=>{b.value=o}),A(v,(o,s)=>{o===void 0||o.id===(s==null?void 0:s.id)||S.getRoutesNumbersAtStop(o.id).then(u=>{I.value=u,_.value=u.map(e=>B(e)).filter(e=>e!==void 0)})},{immediate:!0}),(o,s)=>{const u=z("RouterLink");return l(),i(h,null,[t("h2",null,[c(" Stop "+a(n(r))+" ",1),n(v)!==void 0?(l(),L(T,{key:0,"is-full":n(C)(n(r)),style:{margin:"5px"},onClick:s[0]||(s[0]=e=>n(x)(n(r)))},null,8,["is-full"])):$("",!0)]),G,t("table",H,[J,t("tbody",null,[(l(!0),i(h,null,k(b.value,(e,m)=>(l(),i("tr",{key:e.routeNumber+m},[t("td",null,[N(u,{to:`/route/${e.routeNumber}`},{default:g(()=>[c(a(e.routeNumber),1)]),_:2},1032,["to"])]),t("td",null,a(e.destinationStopName),1),t("td",null,a(e.arrivalTime),1)]))),128))])]),K,M,t("div",P,[(l(!0),i(h,null,k(_.value,(e,m)=>{var y;return l(),i("span",{key:e.id,class:"routes-block__route-item"},[N(u,{to:`/route/${e.routeNumber}`},{default:g(()=>[c(a(e.routeNumber),1)]),_:2},1032,["to"]),c(" "+a(m+1===((y=_.value)==null?void 0:y.length)?".":","),1)])}),128))]),Q],64)}}});const et=E(U,[["__scopeId","data-v-b9d1ff09"]]);export{et as default};
