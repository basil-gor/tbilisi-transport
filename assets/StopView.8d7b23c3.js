import{F,A as S}from"./FavoriteButton.b5e8f842.js";import{d as A,f as L,r as c,E as $,G as D,w as E,c as u,b as t,j as _,k as a,u as l,a as U,H as j,F as f,g as k,I as z,o as n,h as w,i as I,p as G,l as H,m as M,_ as V}from"./index.e2d6e5b9.js";import{u as W}from"./transport-stops.19699ef3.js";import{u as q}from"./transport-routes.6535fcb6.js";const d=p=>(G("data-v-3731b0c7"),p=p(),H(),p),J=d(()=>t("br",null,null,-1)),K={style:{"text-align":"left",width:"100%"}},P=d(()=>t("thead",null,[t("tr",null,[t("th",null,"Number"),t("th",null,"Destination"),t("th",{style:{"text-align":"right"}},"Time")])],-1)),Q={style:{"text-align":"right"}},X=d(()=>t("br",null,null,-1)),Y=d(()=>t("h3",null,"Routes on this stop:",-1)),Z={class:"routes-block"},O=d(()=>t("div",{style:{"font-size":"10px","font-style":"italic",display:"flex","flex-direction":"row","flex-wrap":"nowrap"}},[t("span",{style:{color:"#ff7758"}}," Note: "),t("div",{style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",margin:"0 10px"}},[t("span",null," There are more routes possible. "),t("span",null,"We have no more actual available data. ")])],-1)),tt=A({__name:"StopView",setup(p){const r=z().params.stopCode.toString(),{addOrRemoveStopInFavorites:N,isStopInFavorites:T,getStopByCode:B}=W(),{getRouteByNumber:C}=q(),h=L(()=>B(r)),b=c([]),R=c([]),m=c([]),y=c(),x=()=>S.getArrivalTime(r).then(o=>{b.value=o});return $(()=>{x().then(()=>{y.value=setInterval(x,15e3)})}),D(()=>{clearInterval(y.value)}),E(h,(o,s)=>{o===void 0||o.id===(s==null?void 0:s.id)||S.getRoutesNumbersAtStop(o.id).then(i=>{R.value=i,m.value=i.map(e=>C(e)).filter(e=>e!==void 0)})},{immediate:!0}),(o,s)=>{const i=M("RouterLink");return n(),u(f,null,[t("h2",null,[_(" Stop "+a(l(r))+" ",1),l(h)!==void 0?(n(),U(F,{key:0,"is-full":l(T)(l(r)),style:{margin:"5px"},onClick:s[0]||(s[0]=e=>l(N)(l(r)))},null,8,["is-full"])):j("",!0)]),J,t("table",K,[P,t("tbody",null,[(n(!0),u(f,null,k(b.value,(e,v)=>(n(),u("tr",{key:e.routeNumber+v},[t("td",null,[w(i,{to:`/route/${e.routeNumber}`},{default:I(()=>[_(a(e.routeNumber),1)]),_:2},1032,["to"])]),t("td",null,a(e.destinationStopName),1),t("td",Q,a(e.arrivalTime),1)]))),128))])]),X,Y,t("div",Z,[(n(!0),u(f,null,k(m.value,(e,v)=>{var g;return n(),u("span",{key:e.id,class:"routes-block__route-item"},[w(i,{to:`/route/${e.routeNumber}`},{default:I(()=>[_(a(e.routeNumber),1)]),_:2},1032,["to"]),_(" "+a(v+1===((g=m.value)==null?void 0:g.length)?".":","),1)])}),128))]),O],64)}}});const nt=V(tt,[["__scopeId","data-v-3731b0c7"]]);export{nt as default};
