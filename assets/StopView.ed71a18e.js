import{F,A as S}from"./FavoriteButton.d55db124.js";import{d as A,f as L,r as c,y as $,z,q as D,c as u,b as t,j as _,t as a,u as l,a as U,h as j,F as f,g as k,A as q,o as n,i as w,w as N,p as E,k as M,l as V,_ as W}from"./index.d803bb52.js";import{u as G}from"./transport-stops.9de77635.js";import{u as H}from"./transport-routes.daaf7810.js";const d=p=>(E("data-v-3731b0c7"),p=p(),M(),p),J=d(()=>t("br",null,null,-1)),K={style:{"text-align":"left",width:"100%"}},P=d(()=>t("thead",null,[t("tr",null,[t("th",null,"Number"),t("th",null,"Destination"),t("th",{style:{"text-align":"right"}},"Time")])],-1)),Q={style:{"text-align":"right"}},X=d(()=>t("br",null,null,-1)),Y=d(()=>t("h3",null,"Routes on this stop:",-1)),Z={class:"routes-block"},O=d(()=>t("div",{style:{"font-size":"10px","font-style":"italic",display:"flex","flex-direction":"row","flex-wrap":"nowrap"}},[t("span",{style:{color:"#ff7758"}}," Note: "),t("div",{style:{display:"flex","flex-direction":"row","flex-wrap":"wrap",margin:"0 10px"}},[t("span",null," There are more routes possible. "),t("span",null,"We have no more actual available data. ")])],-1)),tt=A({__name:"StopView",setup(p){const r=q().params.stopCode.toString(),{addOrRemoveStopInFavorites:I,isStopInFavorites:T,getStopByCode:B}=G(),{getRouteByNumber:C}=H(),h=L(()=>B(r)),b=c([]),R=c([]),m=c([]),y=c(),x=()=>S.getArrivalTime(r).then(o=>{b.value=o});return $(()=>{x().then(()=>{y.value=setInterval(x,15e3)})}),z(()=>{clearInterval(y.value)}),D(h,(o,s)=>{o===void 0||o.id===(s==null?void 0:s.id)||S.getRoutesNumbersAtStop(o.id).then(i=>{R.value=i,m.value=i.map(e=>C(e)).filter(e=>e!==void 0)})},{immediate:!0}),(o,s)=>{const i=V("RouterLink");return n(),u(f,null,[t("h2",null,[_(" Stop "+a(l(r))+" ",1),l(h)!==void 0?(n(),U(F,{key:0,"is-full":l(T)(l(r)),style:{margin:"5px"},onClick:s[0]||(s[0]=e=>l(I)(l(r)))},null,8,["is-full"])):j("",!0)]),J,t("table",K,[P,t("tbody",null,[(n(!0),u(f,null,k(b.value,(e,v)=>(n(),u("tr",{key:e.routeNumber+v},[t("td",null,[w(i,{to:`/route/${e.routeNumber}`},{default:N(()=>[_(a(e.routeNumber),1)]),_:2},1032,["to"])]),t("td",null,a(e.destinationStopName),1),t("td",Q,a(e.arrivalTime),1)]))),128))])]),X,Y,t("div",Z,[(n(!0),u(f,null,k(m.value,(e,v)=>{var g;return n(),u("span",{key:e.id,class:"routes-block__route-item"},[w(i,{to:`/route/${e.routeNumber}`},{default:N(()=>[_(a(e.routeNumber),1)]),_:2},1032,["to"]),_(" "+a(v+1===((g=m.value)==null?void 0:g.length)?".":","),1)])}),128))]),O],64)}}});const nt=W(tt,[["__scopeId","data-v-3731b0c7"]]);export{nt as default};
