import{u as K,r as m,g as q,e as X,w as J,f as Y,h as Z}from"./index.6a6331c3.js";import{A as $}from"./arriving.e2f468c4.js";var j;const y=typeof window<"u",k=e=>typeof e=="function",ee=e=>typeof e=="string",te=()=>{};y&&((j=window==null?void 0:window.navigator)==null?void 0:j.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function L(e){return typeof e=="function"?e():K(e)}function re(e,t){function r(...n){e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})}return r}const V=e=>e();function ne(e=V){const t=m(!0);function r(){t.value=!1}function n(){t.value=!0}return{isActive:t,pause:r,resume:n,eventFilter:(...s)=>{t.value&&e(...s)}}}function ae(e){return e}function oe(e){return q()?(X(e),!0):!1}var F=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,se=Object.prototype.propertyIsEnumerable,ue=(e,t)=>{var r={};for(var n in e)ie.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&F)for(var n of F(e))t.indexOf(n)<0&&se.call(e,n)&&(r[n]=e[n]);return r};function le(e,t,r={}){const n=r,{eventFilter:i=V}=n,s=ue(n,["eventFilter"]);return J(e,re(i,t),s)}var fe=Object.defineProperty,ce=Object.defineProperties,pe=Object.getOwnPropertyDescriptors,S=Object.getOwnPropertySymbols,z=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,N=(e,t,r)=>t in e?fe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,de=(e,t)=>{for(var r in t||(t={}))z.call(t,r)&&N(e,r,t[r]);if(S)for(var r of S(t))B.call(t,r)&&N(e,r,t[r]);return e},ve=(e,t)=>ce(e,pe(t)),Oe=(e,t)=>{var r={};for(var n in e)z.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&S)for(var n of S(e))t.indexOf(n)<0&&B.call(e,n)&&(r[n]=e[n]);return r};function _e(e,t,r={}){const n=r,{eventFilter:i}=n,s=Oe(n,["eventFilter"]),{eventFilter:p,pause:d,resume:l,isActive:a}=ne(i);return{stop:le(e,t,ve(de({},s),{eventFilter:p})),pause:d,resume:l,isActive:a}}function ye(e){var t;const r=L(e);return(t=r==null?void 0:r.$el)!=null?t:r}const b=y?window:void 0;y&&window.document;y&&window.navigator;y&&window.location;function we(...e){let t,r,n,i;if(ee(e[0])||Array.isArray(e[0])?([r,n,i]=e,t=b):[t,r,n,i]=e,!t)return te;Array.isArray(r)||(r=[r]),Array.isArray(n)||(n=[n]);const s=[],p=()=>{s.forEach(u=>u()),s.length=0},d=(u,f,O)=>(u.addEventListener(f,O,i),()=>u.removeEventListener(f,O,i)),l=J(()=>ye(t),u=>{p(),u&&s.push(...r.flatMap(f=>n.map(O=>d(u,f,O))))},{immediate:!0,flush:"post"}),a=()=>{l(),p()};return oe(a),a}const P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},I="__vueuse_ssr_handlers__";P[I]=P[I]||{};const ge=P[I];function me(e,t){return ge[e]||t}function Se(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}var he=Object.defineProperty,R=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,C=(e,t,r)=>t in e?he(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,T=(e,t)=>{for(var r in t||(t={}))be.call(t,r)&&C(e,r,t[r]);if(R)for(var r of R(t))Pe.call(t,r)&&C(e,r,t[r]);return e};const Ie={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}};function Q(e,t,r,n={}){var i;const{flush:s="pre",deep:p=!0,listenToStorageChanges:d=!0,writeDefaults:l=!0,mergeDefaults:a=!1,shallow:u,window:f=b,eventFilter:O,onError:h=o=>{console.error(o)}}=n,_=(u?Y:m)(t);if(!r)try{r=me("getDefaultStorage",()=>{var o;return(o=b)==null?void 0:o.localStorage})()}catch(o){h(o)}if(!r)return _;const v=L(t),A=Se(v),w=(i=n.serializer)!=null?i:Ie[A],{pause:H,resume:M}=_e(_,()=>U(_.value),{flush:s,deep:p,eventFilter:O});return f&&d&&we(f,"storage",E),E(),_;function U(o){try{o==null?r.removeItem(e):r.setItem(e,w.write(o))}catch(c){h(c)}}function G(o){H();try{const c=o?o.newValue:r.getItem(e);if(c==null)return l&&v!==null&&r.setItem(e,w.write(v)),v;if(!o&&a){const g=w.read(c);return k(a)?a(g,v):A==="object"&&!Array.isArray(g)?T(T({},v),g):g}else return typeof c!="string"?c:w.read(c)}catch(c){h(c)}finally{M()}}function E(o){if(!(o&&o.storageArea!==r)){if(o&&o.key===null){_.value=v;return}o&&o.key!==e||(_.value=G(o))}}}var D;(function(e){e.UP="UP",e.RIGHT="RIGHT",e.DOWN="DOWN",e.LEFT="LEFT",e.NONE="NONE"})(D||(D={}));var Ae=Object.defineProperty,W=Object.getOwnPropertySymbols,Ee=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,x=(e,t,r)=>t in e?Ae(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,je=(e,t)=>{for(var r in t||(t={}))Ee.call(t,r)&&x(e,r,t[r]);if(W)for(var r of W(t))$e.call(t,r)&&x(e,r,t[r]);return e};const Fe={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};je({linear:ae},Fe);const Ce=Z("transport",()=>{const e=Q("favoritesStops",new Set),t=Q("favoritesRoutes",new Set);function r(a){n(a)?e.value.delete(a):e.value.add(a)}function n(a){return e.value.has(a)}function i(a){s(a)?t.value.delete(a):t.value.add(a)}function s(a){return t.value.has(a)}function p(a){return l.value.find(u=>u.code===a)}const d=m([]);$.getAllRoutes().then(a=>d.value=a);const l=m([]);return $.getAllStops().then(a=>l.value=a.sort((u,f)=>parseInt(u.code)>parseInt(f.code)?1:-1)),{allRoutes:d,allStops:l,favoritesStops:e,addOrRemoveStopInFavorites:r,isStopInFavorites:n,favoritesRoutes:t,addOrRemoveRouteInFavorites:i,isRouteInFavorites:s,getStopByCode:p}});export{Ce as u};
